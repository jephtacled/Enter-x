<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Business Directory | ENTER-X</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>ENTER-X</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="directory.html">Directory</a>
            <a href="about.html">About</a>
            <a href="contact.html">Contact</a>
            <a href="privacy.html">Privacy</a>
        </nav>
    </header>

    <div class="container">
        <h2 style="text-align:center; color: var(--primary);">Student Business Directory</h2>
        
        <div class="card" style="display:flex; flex-wrap:wrap; gap:10px; padding:20px; border-left: none; border-bottom: 4px solid var(--accent);">
            <input type="text" id="searchInput" placeholder="Search by name..." onkeyup="filter()" style="padding:12px; flex:2; min-width:200px; border-radius:8px; border:1px solid #cbd5e1;">
            <select id="catSelect" onchange="filter()" style="padding:12px; flex:1; border-radius:8px; border:1px solid #cbd5e1;">
                <option value="">All Categories</option>
                <option value="Graphics">Graphics</option>
                <option value="Make-up">Make-up</option>
                <option value="Fashion">Fashion</option>
                <option value="Hairdressing">Hairdressing</option>
                <option value="Photography">Photography</option>
                <option value="Web">Web Services</option>
            </select>
        </div>

        <div id="bizList">
            </div>
    </div>

    <footer>
        <p>&copy; 2026 ENTER-X Nigeria. Empowering Student Entrepreneurs.</p>
    </footer>

    <script src="data.js"></script>
    <script>
        function filter() {
            const q = document.getElementById('searchInput').value.toLowerCase();
            const c = document.getElementById('catSelect').value;
            const list = document.getElementById('bizList');
            
            if (typeof businesses !== 'undefined') {
                const filtered = businesses.filter(b => 
                    b.name.toLowerCase().includes(q) && (c === "" || b.category === c)
                );
                
                if (filtered.length === 0) {
                    list.innerHTML = "<p style='text-align:center;'>No businesses found matching your search.</p>";
                    return;
                }

                list.innerHTML = filtered.map(b => `
                    <div class="card">
                        <img src="${b.image}" alt="${b.name}" style="width:100%; height:250px; object-fit:cover; border-radius:12px;">
                        <h3>${b.name}</h3>
                        <p><strong>Category:</strong> ${b.category}<br><strong>Location:</strong> ${b.location}</p>
                        <a href="profile.html?id=${b.id}" class="btn" style="width:100%;">View Full Profile</a>
                    </div>`).join('');
            }
        }

        // Initialize display on load
        window.onload = () => {
            const params = new URLSearchParams(window.location.search);
            const catParam = params.get('cat');
            if (catParam) {
                document.getElementById('catSelect').value = catParam;
            }
            filter();
        };
    </script>
</body>
</html>
